<p class="h3 bg-light">Tableau de bord</p>

<div class="container-fluid py-5">
  <div class="row">
    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <div class="card">
        <div class="card-header p-3 pt-2 bg-gradient-light border-radius-lg">
          <div
            class="icon icon-lg icon-shape bg-gradient-dark shadow-dark text-center border-radius-xl mt-n4 position-absolute d-flex align-items-center justify-content-center">
            <span class="text-white">{{ totalEtudiants }}</span>
            <i class="i ph:student-fill"></i>
          </div>
          <div class="text-end pt-1 ">
            <p class="text-lg mb-0 text-capitalize">Total</p>
            <p class="mb-0 display-2">{{ totalUE }}</p>
          </div>
        </div>
        <hr class="dark horizontal my-0">
        <div class="card-footer p-3">
          <h3 class="">Unité d'Enseignement</h3>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <div class="card">
        <div class="card-header p-3 pt-2 bg-gradient-light border-radius-lg">
          <div
            class="icon icon-lg icon-shape bg-gradient-primary shadow-primary text-center border-radius-xl mt-n4 position-absolute d-flex align-items-center justify-content-center">
            <span class="text-white">{{ etudiantsPremiereAnnee }}</span>
            <i class="i ph:student-fill"></i>
          </div>
          <div class="text-end pt-1 bg-gradient-light border-radius-lg">
            <p class="text-lg mb-0 text-capitalize">Total UE</p>
            <p class="mb-0 display-2">{{ uePremiereAnnee }}</p>
          </div>
        </div>
        <hr class="dark horizontal my-0">
        <div class="card-footer p-3">
          <h3 class="">1 ère année</h3>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
      <div class="card">
        <div class="card-header p-3 pt-2 bg-gradient-light border-radius-lg">
          <div
            class="icon icon-lg icon-shape bg-gradient-success shadow-success text-center border-radius-xl mt-n4 position-absolute d-flex align-items-center justify-content-center">
            <span class="text-white">{{ etudiantsDeuxiemeAnnee }}</span>
            <i class="i ph:student-fill"></i>
          </div>
          <div class="text-end pt-1 ">
            <p class="text-lg mb-0 text-capitalize">Total UE</p>
            <p class="mb-0 display-2">{{ ueDeuxiemeAnnee }}</p>
          </div>
        </div>
        <hr class="dark horizontal my-0">
        <div class="card-footer p-3">
          <h3 class="">2 ème année</h3>
        </div>
      </div>
    </div>
    <div class="col-xl-3 col-sm-6">
      <div class="card">
        <div class="card-header p-3 pt-2 bg-gradient-light border-radius-lg">
          <div
            class="icon icon-lg icon-shape bg-gradient-info shadow-info text-center border-radius-xl mt-n4 position-absolute d-flex align-items-center justify-content-center">
            <span class="text-white">{{ etudiantsTroisiemeAnnee }}</span>
            <i class="i ph:student-fill"></i>
          </div>
          <div class="text-end pt-1">
            <p class="text-lg mb-0 text-capitalize">Total UE</p>
            <p class="mb-0 display-2">{{ ueTroisiemeAnnee }}</p>
          </div>
        </div>
        <hr class="dark horizontal my-0">
        <div class="card-footer p-3">
          <h3 class="">3 ème année</h3>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="card mb-3">
    <div class="card-body p-3">
      <div class="row">
    <h1 class="display-2">Taux de Réussite par UE</h1>
    <div class="col-sm-12  d-flex align-items-center justify-content-center">
      <canvas id="tauxReussiteChart" ></canvas>
    </div>
  </div>
    </div>
  </div>


  <div class="row mt-6">
    <div class="col-8 marge">
      <h1 class="display-2 ms-7">Distribution des Notes</h1>
      <div class="card">
        <div class="card-body">
          <canvas id="distributionNotesChart"></canvas>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card mt-4">
        <div class="card-header bg-gradient-dark">
          <h3 class="card-title text-white">Top 5 des meilleures moyennes</h3>
        </div>
        <div class="card-body">
          <ul class="list-group">
            <li class="list-group-item" *ngFor="let etudiant of top5Etudiants">
              {{ etudiant.nom }} {{ etudiant.prenom }} - Moyenne : {{ etudiant.moyenne | number:'1.2-2' }}
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container mt-5">
  <div class="card">
    <div class="card-header bg-gradient-light">
      <h1>Comparaison des Niveaux d'Étude</h1>
      <div class="card-body">
        <table class="table table-striped">
          <thead>
            <tr>
              <th class="text-center">Niveau</th>
              <th class="text-center">Nombre d'Étudiants</th>
              <th class="text-center">Moyenne Générale</th>
              <th class="text-center">Taux de Réussite</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let stat of statsParNiveau">
              <td class="text-center">{{ stat.niveau }}</td>
              <td class="text-center">{{ stat.nbEtudiants }}</td>
              <td class="text-center">{{ stat.moyenneGenerale | number:'1.2-2' }}</td>
              <td class="text-center">{{ stat.tauxReussite * 100 | number:'1.2-2' }} %</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="successModalLabel">Succès</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Notes enregistrées avec succès !
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
      </div>
    </div>
  </div>
</div>

<div class="row mt-9"></div>
<div class="row mt-9"></div>
<div class="row mt-9"></div>
